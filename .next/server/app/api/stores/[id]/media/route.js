"use strict";(()=>{var e={};e.id=8125,e.ids=[8125],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},40065:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>w,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>D,staticGenerationAsyncStorage:()=>m});var s={};a.r(s),a.d(s,{GET:()=>u,POST:()=>p});var r=a(49303),i=a(88716),n=a(60670),d=a(87070),o=a(72331);async function u(e,{params:t}){try{let{searchParams:a}=new URL(e.url),s=a.get("date"),r=s?new Date(s):new Date,i=(await o._.mediaSpace.findMany({where:{storeId:parseInt(t.id)},include:{mediaItem:!0,leases:{where:{AND:[{statusId:{not:7}},{OR:[{AND:[{startDate:{lte:r}},{endDate:{gte:r}}]},{startDate:{gt:r}},{endDate:{lt:r}}]}]},orderBy:{startDate:"asc"},select:{id:!0,startDate:!0,endDate:!0,status:!0,customerName:!0,amount:!0}}}})).map(e=>({...e,currentLeases:e.leases.filter(e=>7!==e.status.id&&new Date(e.startDate)<=r&&new Date(e.endDate)>=r),pastLeases:e.leases.filter(e=>7!==e.status.id&&new Date(e.endDate)<r),upcomingLeases:e.leases.filter(e=>7!==e.status.id&&new Date(e.startDate)>r),status:e.leases.some(e=>7!==e.status.id&&new Date(e.startDate)<=r&&new Date(e.endDate)>=r)?"leased":"available"}));return d.NextResponse.json(i)}catch(e){return d.NextResponse.json({error:"Failed to fetch media spaces"},{status:500})}}async function p(e,{params:t}){try{let{mediaItemId:a,quantity:s}=await e.json();return await o._.mediaSpace.createMany({data:Array(s).fill({storeId:parseInt(t.id),mediaItemId:a,status:"available"})}),d.NextResponse.json({success:!0})}catch(e){return d.NextResponse.json({error:"Failed to add media space"},{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/stores/[id]/media/route",pathname:"/api/stores/[id]/media",filename:"route",bundlePath:"app/api/stores/[id]/media/route"},resolvedPagePath:"/Users/joeym13/Documents/GitHub/ash/app/api/stores/[id]/media/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:D}=l,w="/api/stores/[id]/media/route";function h(){return(0,n.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:m})}},72331:(e,t,a)=>{a.d(t,{_:()=>r});var s=a(53524);let r=globalThis.prisma??new s.PrismaClient({log:["query"]})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,5972],()=>a(40065));module.exports=s})();