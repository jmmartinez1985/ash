exports.id=3334,exports.ids=[3334],exports.modules={22147:(e,t,a)=>{Promise.resolve().then(a.bind(a,33850)),Promise.resolve().then(a.bind(a,82284)),Promise.resolve().then(a.bind(a,67072)),Promise.resolve().then(a.bind(a,26245))},92201:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},33850:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var r=a(10326),s=a(57671),i=a(6507),l=a(79635),n=a(71810),o=a(94019),d=a(71939),c=a(14689),m=a(17577),x=a(77109),u=a(90434),h=a(35047),p=a(26245),f=a(41726),g=a(82610);function b(){let[e,t]=(0,m.useState)(!1),[a,b]=(0,m.useState)(!1),{notifications:v,unreadCount:j,markAsRead:y,clearNotification:N}=(0,d.z)(),{data:w}=(0,x.useSession)(),C=(0,h.usePathname)(),{itemCount:S,items:A,removeItem:P,clearCart:M,formData:I}=(0,p.j)(),[D,E]=(0,m.useState)(!1),k=(0,h.useRouter)(),[Z,T]=(0,m.useState)(!1),z=A.reduce((e,t)=>e+t.amount,0),G=async()=>{if(0!==A.length&&w?.user){if(!I){alert("Por favor complete el formulario de informaci\xf3n adicional primero.");return}if(!I.customerName.trim()){alert("Por favor ingrese el nombre del cliente.");return}T(!0);try{let e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create order");let t=await e.json();for(let e of(console.log("Order created:",t),await new Promise(e=>setTimeout(e,1e3)),A))await fetch("/api/leases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaSpaceId:e.spaceId,customerName:I.customerName,startDate:e.startDate,endDate:e.endDate,amount:e.amount,statusId:1,orderId:t.id,extraInformation:{providerInfo:I.providerInfo,productDetails:I.productDetails,campaignRedirect:I.campaignRedirect,marketingGoals:I.marketingGoals,disclaimer:I.disclaimer,productUrl:I.productUrl,targetAudience:I.targetAudience,brandGraphics:I.brandGraphics||"",providerContact:I.providerContact,billingType:I.billingType,giftCampaignDetails:I.giftCampaignDetails||"",planAlaMedida:I.planAlaMedida||"",planAlaMedidaAmount:I.planAlaMedidaAmount||""}})});M(),E(!1),w?.user?.role==="ADVERTISER"?k.push("/leasing/my-leases"):k.push("/leasing/history")}catch(e){console.error("Error creating order:",e),alert("Error al crear la solicitud. Por favor intente nuevamente.")}finally{T(!1)}}};return(0,r.jsxs)("header",{className:"bg-white shadow-sm",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex",children:r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx("h1",{className:"text-xl font-bold",children:"Gestor de Medios Publicitarios"})})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:["/leasing"===C&&(0,r.jsxs)("button",{className:"p-2 text-gray-600 hover:text-gray-900 relative",onClick:()=>E(!0),children:[r.jsx(s.Z,{className:"h-6 w-6"}),S>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:S})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>{t(!e),e||v.forEach(e=>{e.read||y(e.id)})},className:"p-2 hover:bg-gray-100 rounded-full relative",children:[r.jsx(i.Z,{className:"h-6 w-6"}),j>0&&r.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:j})]}),e&&r.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 max-h-96 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notificaciones"}),0===v.length?r.jsx("p",{className:"text-gray-500",children:"No hay notificaciones"}):r.jsx("div",{className:"space-y-2",children:v.map(e=>(0,r.jsxs)("div",{className:`p-3 rounded-lg ${e.read?"bg-gray-50":"bg-blue-50"}`,children:[r.jsx("p",{className:"text-sm",children:e.message}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:(0,c.Z)(e.timestamp,"MMM d, h:mm a")}),r.jsx("button",{onClick:()=>N(e.id),className:"text-xs text-gray-400 hover:text-gray-600",children:"Eliminar"})]})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>b(!a),className:"p-2 hover:bg-gray-100 rounded-full flex items-center gap-2",children:[r.jsx(l.Z,{className:"h-6 w-6"}),w?.user?.name&&r.jsx("span",{className:"text-sm font-medium",children:w.user.name})]}),a&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200",children:r.jsx("div",{className:"p-2",children:w?.user?.role==="ADMIN"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Conectado como",r.jsx("br",{}),r.jsx("span",{className:"font-medium text-gray-900 truncate w-full block",children:w.user.email})]}),r.jsx("div",{className:"border-t border-gray-100 my-1"}),r.jsx(u.default,{href:"/register",className:"block px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md",children:"Crear Usuario"}),(0,r.jsxs)("button",{onClick:()=>(0,x.signOut)(),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md flex items-center gap-2 relative z-9999",children:[r.jsx(n.Z,{className:"h-4 w-4"}),"Cerrar Sesi\xf3n"]})]}):w?.user?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Conectado como",r.jsx("br",{}),r.jsx("span",{className:"font-medium text-gray-900",children:w.user.email})]}),r.jsx("div",{className:"border-t border-gray-100 my-1"}),(0,r.jsxs)("button",{onClick:()=>(0,x.signOut)(),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md flex items-center gap-2 relative z-9999",children:[r.jsx(n.Z,{className:"h-4 w-4"}),"Cerrar Sesi\xf3n"]})]}):r.jsx(u.default,{href:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"Sign in"})})})]})]})]})}),D&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-[800px] w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Carrito de Solicitudes"}),r.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(o.Z,{className:"h-5 w-5"})})]}),A.length>0?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"space-y-4 mb-6",children:A.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium",children:e.mediaType}),r.jsx("p",{className:"text-sm text-gray-600",children:e.storeName}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,c.Z)(e.startDate,"d MMM",{locale:f.Z})," - ",(0,c.Z)(e.endDate,"d MMM yyyy",{locale:f.Z})]}),(0,r.jsxs)("p",{className:"text-sm font-medium",children:["$",e.amount.toLocaleString()]})]}),r.jsx("button",{onClick:()=>P(e.spaceId),className:"text-red-500 hover:text-red-700",children:r.jsx(o.Z,{className:"h-5 w-5"})})]},t))}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"font-medium",children:"Total:"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",z.toLocaleString()]})]}),r.jsx(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:G,disabled:Z,children:Z?"Procesando...":"Confirmar Solicitud"})]})]}):r.jsx("div",{className:"text-center py-6 text-gray-500",children:"No hay items en el carrito"})]})})]})}},82284:(e,t,a)=>{"use strict";a.d(t,{Navigation:()=>x});var r=a(10326),s=a(90434),i=a(35047),l=a(48238),n=a(70717),o=a(24319),d=a(88378),c=a(10029),m=a(77109);function x(){let e=(0,i.usePathname)(),{data:t}=(0,m.useSession)(),a=t?.user?"ADVERTISER"===t.user.role?[{href:"/leasing",label:"Solicitud",icon:l.Z},{href:"/leasing/my-leases",label:"Mis Solicitudes",icon:n.Z}]:[{href:"/dashboard",label:"Panel Principal",icon:o.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/leasing",label:"Solicitud",icon:l.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/manage",label:"Administrar",icon:d.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/leasing/history",label:"Historial",icon:n.Z,roles:["ADMIN","ASSOCIATE"]},{name:"Pipeline",href:"/pipedrive",label:"Pipeline",icon:c.Z,roles:["ADMIN","ASSOCIATE"]}].filter(e=>e.roles.includes(t.user.role)):[];return r.jsx("nav",{className:"flex flex-col gap-4 p-4",children:a.map(({href:t,label:a,icon:i})=>{let l=e===t;return(0,r.jsxs)(s.default,{href:t,className:`
              flex items-center gap-2 px-4 py-2 rounded-lg
              transition-colors duration-200
              ${l?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
            `,children:[r.jsx(i,{className:"h-5 w-5"}),r.jsx("span",{children:a})]},t)})})}},67072:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>d});var r=a(10326),s=a(77109),i=a(17577);let l=(0,i.createContext)(void 0),n=({children:e})=>{let[t,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[o,d]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/media"),t=await e.json();a(t),n(!1)}catch(e){d("Failed to fetch media data"),n(!1)}})()},[]),r.jsx(l.Provider,{value:{media:t,setMedia:a,loading:s,error:o},children:e})};var o=a(71939);function d({children:e}){return r.jsx(s.SessionProvider,{children:r.jsx(n,{children:r.jsx(o.J,{children:e})})})}},82610:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var r=a(10326),s=a(17577),i=a(77863);let l=(0,a(79360).j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",ghost:"bg-transparent text-gray-600 hover:text-gray-900",outline:"border border-gray-300 text-gray-700 hover:bg-gray-100"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 py-1 text-xs",lg:"h-12 px-6 py-3 text-base"}},defaultVariants:{variant:"default",size:"default"}}),n=s.forwardRef(({className:e,variant:t,size:a,...s},n)=>r.jsx("button",{ref:n,className:(0,i.cn)(l({variant:t,size:a}),e),...s}));n.displayName="Button"},26245:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>l,j:()=>n});var r=a(10326),s=a(17577);let i=(0,s.createContext)({items:[],itemCount:0,addItem:()=>{},removeItem:()=>{},clearCart:()=>{},formData:null,setFormData:()=>{}});function l({children:e}){let[t,a]=(0,s.useState)([]),[l,n]=(0,s.useState)(null);return r.jsx(i.Provider,{value:{items:t,formData:l,addItem:e=>{console.log("Adding item to cart with planAlaMedida:",{planAlaMedida:e.extraInformation.planAlaMedida,planAlaMedidaAmount:e.extraInformation.planAlaMedidaAmount});let t={...e,extraInformation:{...e.extraInformation,planAlaMedida:e.extraInformation.planAlaMedida??null,planAlaMedidaAmount:e.extraInformation.planAlaMedidaAmount??null}};console.log("Processed cart item:",t),a(e=>[...e,t])},removeItem:e=>{a(t=>t.filter(t=>t.spaceId!==e))},clearCart:()=>{a([])},setFormData:n,itemCount:t.length},children:e})}function n(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},71939:(e,t,a)=>{"use strict";a.d(t,{J:()=>n,z:()=>o});var r=a(10326),s=a(17577);let i=(0,s.createContext)(void 0),l={"Lease successfully created":"Solicitud creada exitosamente","Failed to create lease":"Error al crear la solicitud","Lease successfully revoked":"Solicitud revocada exitosamente","Failed to revoke lease":"Error al revocar la solicitud","Store updated successfully":"Tienda actualizada exitosamente","Failed to update store":"Error al actualizar la tienda","Media space updated":"Espacio publicitario actualizado","Failed to update media space":"Error al actualizar el espacio publicitario"};function n({children:e}){let[t,a]=(0,s.useState)([]),n=t.filter(e=>!e.read).length;return r.jsx(i.Provider,{value:{notifications:t,addNotification:e=>{let t=l[e]||e,r={id:Date.now().toString(),message:t,timestamp:new Date,read:!1};a(e=>[r,...e])},markAsRead:e=>{a(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},clearNotification:e=>{a(t=>t.filter(t=>t.id!==e))},unreadCount:n},children:e})}let o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},77863:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(41135),s=a(31009);function i(...e){return(0,s.m6)((0,r.W)(e))}},76825:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x,metadata:()=>m});var r=a(19510),s=a(85384),i=a.n(s);a(67272);var l=a(68570);let n=(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/components/Navigation.tsx#Navigation`),o=(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/components/Header.tsx#default`),d=(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/components/Providers.tsx#Providers`);(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/contexts/CartContext.tsx#CartContext`);let c=(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/contexts/CartContext.tsx#CartProvider`);(0,l.createProxy)(String.raw`/Users/joeym13/Documents/GitHub/ash/app/contexts/CartContext.tsx#useCart`);let m={title:"Ad Media Manager",description:"Manage advertising media in branches"};function x({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(d,{children:r.jsx(c,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[r.jsx(n,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(o,{}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-200 p-6",children:e})]})]})})})})})}},67272:()=>{}};